# قائمة مراجعة أفضل ممارسات Next.js 15 و Prisma

يوفر هذا المستند قائمة مراجعة شاملة لمشاريع Next.js 15 و Prisma الحديثة. ويتضمن:
- ✅ قائمة مرجعية لأفضل الممارسات
- ⚡ الحالة الحالية (إيجابيات/سلبيات التنفيذ الخاص بك)
- ⭐ المزايا (إذا قمت بتطبيق قائمة المراجعة)
- ⚠️ العيوب (إذا لم تقم بذلك)

---

## ✅ قائمة المراجعة

### 1. هيكل المشروع
- [ ] كل مسار في `/app` يستخدم مجلدات فرعية خاصة به `actions/` و `components/`
- [ ] المنطق المشترك موجود في `/lib`، والخطافات المخصصة (custom hooks) في `/hooks`، والأنواع في `/types`
- [ ] الأصول الثابتة (الخطوط، الصور) موجودة في `/public`
- [ ] لا يوجد منطق أعمال أو جلب بيانات في مكونات واجهة المستخدم

### 2. مكونات الخادم والعميل
- [ ] يتم استخدام مكونات الخادم بشكل افتراضي لجلب البيانات وعرضها
- [ ] يتم استخدام مكونات العميل فقط للتفاعلية (النماذج، النوافذ المنبثقة، إلخ)
- [ ] في مكونات الخادم، يتم انتظار `params` و `searchParams` (Next.js 15+)
- [ ] في مكونات العميل، استخدم `use()` hook لـ `params` و `searchParams`

### 3. جلب البيانات والإجراءات (Actions)
- [ ] جميع إجراءات الخادم موجودة في مجلدات `actions/`، وليست مختلطة مع كود واجهة المستخدم
- [ ] يتم استخدام Prisma فقط في إجراءات الخادم، وليس أبدًا في مكونات العميل
- [ ] يتم التحقق من صحة جميع مدخلات المستخدم (على سبيل المثال، باستخدام Zod) قبل عمليات قاعدة البيانات
- [ ] يتم إرجاع التواريخ كسلاسل ISO إلى العميل

### 4. مخطط Prisma واستخدامه
- [ ] النماذج (Models) تستخدم PascalCase، والحقول تستخدم camelCase
- [ ] جميع العلاقات صريحة وتستخدم مفاتيح خارجية
- [ ] يتم استخدام التعدادات (Enums) لحقول الحالة/الاختيار
- [ ] تتم إدارة عمليات الترحيل (Migrations) باستخدام Prisma Migrate، وليس SQL يدويًا
- [ ] جميع البيانات الحساسة وبيانات اعتماد قاعدة البيانات موجودة في `.env`، وليست مكتوبة بشكل ثابت في الكود

### 5. التصميم والخطوط
- [ ] يتم استخدام Tailwind CSS لجميع التصاميم
- [ ] يتم تحميل الخطوط باستخدام `next/font` (`next/font/google` أو `next/font/local`)، وليس عبر CDN `<link>`
- [ ] يتم تعريف عائلات الخطوط في `tailwind.config.js` وتستخدم عالميًا
- [ ] يتم استخدام ملفات خطوط `.woff2` فقط للحصول على أفضل أداء

### 6. إدارة الحالة (State Management)
- [ ] يتم استخدام Zustand أو React context للحالة العامة
- [ ] لا يوجد تمرير خصائص (prop drilling) لحالة عميقة
- [ ] منطق الحالة موجود في `/store` أو `/provider`

### 7. الأمان والبيئة
- [ ] يتم استخدام NextAuth للمصادقة
- [ ] يتم تخزين جميع الأسرار ومفاتيح API في `.env`
- [ ] لا يتم كشف أي أسرار للعميل
- [ ] يتم حماية مسارات API بواسطة برمجيات وسيطة (middleware)
- [ ] يتم التحقق من صحة جميع مدخلات النماذج على الخادم
- [ ] يتم فرض HTTPS في بيئة الإنتاج

### 8. الأداء وإمكانية الوصول
- [ ] يتم استخدام `<Image />` من Next.js لجميع الصور
- [ ] يتم تمكين التحميل الكسول (Lazy loading) للصور والمكونات الثقيلة
- [ ] يتم إجراء تدقيقات Lighthouse؛ يجب أن تكون الدرجات > 90 للأداء وإمكانية الوصول
- [ ] يتم استخدام HTML الدلالي وسمات ARIA
- [ ] يتم اختبار تباين الألوان والتنقل بلوحة المفاتيح

### 9. الاختبار وجودة الكود
- [ ] تم تكوين وفرض ESLint و Prettier
- [ ] TypeScript في الوضع الصارم (strict mode) (`tsconfig.json`)
- [ ] تتم كتابة اختبارات الوحدة والتكامل للمنطق الأساسي (Jest, Testing Library)
- [ ] لا توجد أخطاء تدقيق لغوي (lint) أو أخطاء أنواع (type errors) في CI

### 10. التوثيق وقابلية الصيانة
- [ ] ملف `README.md` محدث بالإعداد والاستخدام والاصطلاحات
- [ ] جميع الوحدات الرئيسية والإجراءات والمكونات موثقة
- [ ] يتم تتبع تغييرات سير العمل/العملية في `AUTO_TASKS_BACKUP.md` أو ما شابه

---

## ⚡ الحالة الحالية (إيجابيات/سلبيات)

### الإيجابيات (التنفيذ الحالي)
- استخدام جيد للمجلدات النمطية (`/app`, `/components`, `/lib`, `/types`, `/prisma`)
- استخدام Tailwind CSS و Zustand للتصميم وإدارة الحالة
- استخدام NextAuth و `.env` للمصادقة والأسرار
- وجود ESLint، و Prettier، و TypeScript
- مخطط Prisma نظيف في الغالب ويستخدم عمليات الترحيل
- ملفات التوثيق موجودة ويتم صيانتها

### السلبيات (التنفيذ الحالي)
- لا يتم تحميل الخطوط باستخدام `next/font` (تحسين مفقود)
- قد لا تتبع بعض المسارات/المكونات بدقة اصطلاح المجلدات الفرعية `actions/` و `components/`
- الحاجة إلى تدقيق فصل مكونات الخادم/العميل لـ Next.js 15 (استخدام params/searchParams)
- قد تحتاج بعض نماذج/حقول Prisma إلى تحسينات في التسمية أو التعدادات
- قد لا يتم دائمًا إرجاع التواريخ كسلاسل ISO
- الحاجة إلى التأكد من التحقق من صحة جميع مدخلات المستخدم باستخدام Zod
- قد لا يتم إجراء تدقيقات الأداء وإمكانية الوصول (Lighthouse) بانتظام
- قد تكون تغطية الاختبار غير مكتملة

---

## ⭐ المزايا (إذا قمت بتطبيق جميع عناصر قائمة المراجعة)
- أقصى أداء وأمان وقابلية للتوسع
- لا يوجد تغيير في التخطيط (layout shift) أو FOUT للخطوط
- سهولة تأهيل وصيانة المطورين الجدد
- هيكل واصطلاحات كود متسقة
- أخطاء أقل وتغطية اختبار أفضل
- تحسين إمكانية الوصول وتجربة المستخدم لجميع المستخدمين
- ترقيات أسهل لإصدارات Next.js/Prisma المستقبلية

## ⚠️ العيوب (إذا لم تقم بتطبيق قائمة المراجعة)
- خطر حدوث تغيير في التخطيط، أو بطء تحميل الخطوط، أو FOUT
- مشكلات أمان محتملة (أسرار مكشوفة، مدخلات غير متحقَق منها)
- صعوبة صيانة وتوسيع قاعدة الكود
- زيادة الديون التقنية وصعوبة التأهيل
- درجات أداء وإمكانية وصول أقل
- المزيد من الأخطاء وتجربة مستخدم غير متسقة

---

> **استخدم هذا الملف كمرجع حي لأفضل الممارسات. قم بتحديثه أثناء إعادة هيكلة مشروعك!**
