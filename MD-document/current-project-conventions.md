# 🛠️ اصطلاحات المشروع الحالية (مزامنة AUTO_TASKS والذاكرة المحلية)

يتم تحديث هذا الملف تلقائيًا ليعكس أي تغييرات رئيسية في ذاكرة Cascade المحلية، أو اصطلاحات الترميز، أو أفضل الممارسات التي تؤثر على مشروعك. يرجى المراجعة بانتظام للحصول على إرشادات محدثة!

---

## [2025-04-30] Next.js 15: أفضل ممارسات `params` و `searchParams`

**المرجع:** https://nextjs.org/docs/app/guides/upgrading/version-15#params--searchparams

**ملخص:**
- لمكونات الخادم غير المتزامنة (async server components): `params` و `searchParams` هي كائنات Promise ويجب انتظارها (await).
- لمكونات العميل (client components): استخدم React `use()` hook لفك تغليف كائنات Promise.
- هذا تغيير جذري عن الإصدارات السابقة حيث كانت هذه كائنات عادية.

**مثال (خادم/غير متزامن):**
```tsx
export default async function Page(props: {
  params: Promise<{ slug: string }>
  searchParams: Promise<{ [key: string]: string | string[] | undefined }>
}) {
  const params = await props.params;
  const searchParams = await props.searchParams;
  // ...
}
```

**مثال (عميل):**
```tsx
'use client'
import { use } from 'react';
export default function Page(props: {
  params: Promise<{ slug: string }>
  searchParams: Promise<{ [key: string]: string | string[] | undefined }>
}) {
  const params = use(props.params);
  const searchParams = use(props.searchParams);
  // ...
}
```
---

**يجب أن يتبع كل الكود الجديد أو المعاد هيكلته هذا الاصطلاح.**

---

## كيف يتم تحديث هذا الملف
- في أي وقت يتم فيه تحديث ذاكرة Cascade باصطلاح جديد، أو أفضل ممارسة، أو قرار على مستوى المشروع، ستتم إضافة إدخال هنا.
- هذا يضمن أن فريقك لديه دائمًا مصدر واحد للحقيقة للمعايير الفنية/الخاصة بالمشروع.

---
---

## اصطلاحات وإرشادات إضافية (من نسخة احتياطية بتاريخ 2025-04-30)

الأقسام التالية مأخوذة من نسخة احتياطية أكثر شمولاً بتاريخ 2025-04-30 وهي مدرجة هنا كمرجع. قد يتم تجاوز بعضها بواسطة اصطلاحات أحدث أو تطور المشروع.

---

### [2025-04-30] هيكل مجلدات المشروع ومعايير الترميز

- يجب أن يحتوي كل مجلد مسار (route folder) (على سبيل المثال، /app/dashboard/{routeName}/) على:
  - مجلد `actions/` لجميع إجراءات الخادم (جلب البيانات، التعديلات، إلخ).
  - مجلد `components/` لجميع مكونات واجهة المستخدم الخاصة بهذا المسار.
  - يجب أن يستورد ملف `page.tsx` الرئيسي من هذه المجلدات وأن يظل نظيفًا ونمطيًا.
- تنطبق هذه القاعدة على جميع المسارات الجديدة والمعاد هيكلتها لتحقيق الاتساق وقابلية الصيانة والتوسع عبر المشروع.

---

### [2025-04-30] مبدأ احترافية واجهة المستخدم/تجربة المستخدم (UI/UX)

- يجب تصميم جميع مكونات واجهة المستخدم وتدفقاتها بمظهر احترافي وتجربة مستخدم مثالية (UX).
- ضع في اعتبارك دائمًا أن المستخدم النهائي قد لا يكون تقنيًا؛ يجب أن تكون الواجهات واضحة وبديهية وجذابة بصريًا ولا تتطلب أي معرفة تقنية لاستخدامها.
- استخدم أنماط واجهة مستخدم حديثة، وتباين ألوان يمكن الوصول إليه، وتجميع منطقي لعناصر التحكم.
- فضّل الوضوح وسهولة الاستخدام على التعقيد الفني أو راحة المطور.
- يجب مراجعة جميع ميزات واجهة المستخدم الجديدة من حيث: الوضوح، وإمكانية الوصول، والاستجابة، والحد الأدنى من العبء المعرفي للمستخدمين غير التقنيين.

---

### [2025-04-30] الاختبار بدون ميزانية

- قم بإعداد اختبارات آلية (وحدة، تكامل، طرف إلى طرف E2E) باستخدام Jest، أو React Testing Library، أو Playwright، أو Cypress.
- قم بإجراء اختبار يدوي بانتظام كمطور (حاول كسر الأشياء، واختبر الحالات الحافة، واستخدم متصفحات/أجهزة مختلفة).
- اطلب من الأصدقاء أو العائلة أو الزملاء تجربة التطبيق والإبلاغ عن الأخطاء أو مشكلات قابلية الاستخدام.
- أضف زر/نموذج ملاحظات في التطبيق للمستخدمين للإبلاغ عن المشكلات.
- ضع في اعتبارك تشغيل نسخة تجريبية مفتوحة (open beta) أو مجموعة اختبار مع مستخدمين مبكرين.
- استخدم أدوات مجانية للتدقيق اللغوي (linting)، وإمكانية الوصول، ومراقبة الأخطاء (ESLint، Prettier، Lighthouse، Sentry، إلخ).

الغرض: ضمان موثوقية التطبيق وقابليته للاستخدام دون تكلفة توظيف مختبِر مخصص.

---

### [2025-04-30] معايير الأمان والترميز

- يجب تخزين جميع مفاتيح API في متغيرات البيئة.
- تتم معالجة المصادقة من خلال NextAuth.
- يتم حماية مسارات API بواسطة برمجيات وسيطة (middleware) مناسبة.
- التحقق من صحة النماذج باستخدام Zod.
- معالجة دفع آمنة.
- تشفير البيانات الحساسة.
- تحديد معدل الطلبات (Rate limiting) لنقاط نهاية API.
- تكوين CORS.
- حماية XSS.

---

### [2025-04-30] ضمان الجودة

1. جودة الكود
   - تكوين ESLint.
   - تنسيق Prettier.
   - وضع TypeScript الصارم (strict mode).
   - اختبار الوحدة (Unit testing).
   - اختبار التكامل (Integration testing).
   - اختبار طرف إلى طرف (E2E testing).

2. الأداء
   - درجات Lighthouse > 90.
   - تحسين Core Web Vitals.
   - تحسين الصور.
   - تقسيم الكود (Code splitting).
   - تحسين حجم الحزمة (Bundle size).

3. إمكانية الوصول
   - الامتثال لـ WCAG 2.1.
   - التنقل بلوحة المفاتيح.

---

### [2025-04-30] مثال على هيكل المشروع

```
www.ammawag.com/
├── app/                    # مجلد تطبيق Next.js مع الصفحات ومسارات API
├── components/            # مكونات React قابلة لإعادة الاستخدام
├── constant/              # ثوابت وتكوينات التطبيق
├── fonts/                # ملفات الخطوط المخصصة
├── hooks/                # خطافات React المخصصة (Custom Hooks)
├── lib/                  # وظائف مساعدة ومنطق مشترك
├── prisma/               # مخطط قاعدة البيانات والترحيلات (Migrations)
├── provider/             # مزودات سياق React (Context Providers)
├── public/               # الأصول الثابتة (صور، أيقونات)
├── store/                # إدارة الحالة (Zustand)
├── types/                # تعريفات أنواع TypeScript
├── utils/                # وظائف وأدوات مساعدة
└── config files:          # ملفات التكوين:
    ├── .env              # متغيرات البيئة
    ├── auth-config.ts    # تكوين NextAuth
    ├── components.json   # تكوين shadcn UI
    ├── next-config.ts    # تكوين Next.js
    ├── tailwind-config.ts # تكوين Tailwind CSS
    └── tsconfig.json     # تكوين TypeScript
```

---

### [2025-04-30] كيفية استخدام هذا الملف (أصلاً من النسخة الاحتياطية)
- كان هذا القسم (وما فوقه) جزءًا من نسخة احتياطية كاملة لجميع الاصطلاحات وأفضل الممارسات الحالية.
- تم تحديثه تلقائيًا عند حدوث تغييرات كبيرة.
- استخدم هذا كمرجع للإعداد، ومراجعات الكود، والتخطيط الفني.
