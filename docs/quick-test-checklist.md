# ๐งช **ูุงุฆูุฉ ุงูุงุฎุชุจุงุฑ ุงูุณุฑูุน - WhatsApp OTP (ูุน ุงูููู ุงูููููุฉ)**

## โ **ุงููุฑุญูุฉ 1: ุฅุนุฏุงุฏ Environment Variables (ุงูููู ุงูููููุฉ)**

### **1. ุฅูุดุงุก ููู `.env.local`**
```bash
# ูู ุงููุฌูุฏ ุงูุฌุฐุฑ ูููุดุฑูุน
touch .env.local
```

### **2. ุฅุถุงูุฉ ุงูููู ุงูููููุฉ ููุชุฌุฑุจุฉ ุงูุณุฑูุนุฉ**
```env
# WhatsApp Cloud API Configuration (Test Values)
WHATSAPP_PERMANENT_TOKEN=test_token_123
WHATSAPP_PHONE_NUMBER_ID=test_phone_id_123

# Application Configuration
APP_NAME=ูุชุฌุฑูุง ุงูุฅููุชุฑููู
APP_URL=http://localhost:3000

# Development Mode
NODE_ENV=development
```

### **3. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุฎุงุฏู**
```bash
# ุฃููู ุงูุฎุงุฏู (Ctrl+C)
pnpm dev
```

---

## ๐ **ุงููุฑุญูุฉ 2: ุงุฎุชุจุงุฑ ุงูุงุชุตุงู (Dev Mode)**

### **1. ุงูุชุญูู ูู ุงููุชุบูุฑุงุช**
ุฃุถู ูุฐุง ุงูููุฏ ูุคูุชุงู ูู `app/(e-comm)/auth/verify/component/OtpForm.tsx`:

```typescript
// ูู ุจุฏุงูุฉ ุงููููุ ุจุนุฏ imports
console.log('Environment Check:', {
  token: process.env.WHATSAPP_PERMANENT_TOKEN ? 'โ Set' : 'โ Missing',
  phoneId: process.env.WHATSAPP_PHONE_NUMBER_ID ? 'โ Set' : 'โ Missing',
  appName: process.env.APP_NAME || 'โ Missing',
  nodeEnv: process.env.NODE_ENV,
  isTestMode: process.env.WHATSAPP_PERMANENT_TOKEN === 'test_token_123'
});
```

### **2. ุงุฎุชุจุงุฑ ุงููุงุฌูุฉ**
1. ุงุฐูุจ ุฅูู `http://localhost:3000/checkout`
2. ุฅุฐุง ูุงู ุงูุญุณุงุจ ุบูุฑ ููุนูุ ุณุชุธูุฑ ุฑุณุงูุฉ "ุชูุนูู ุงูุญุณุงุจ"
3. ุงููุฑ ุนูู ุงูุฑุงุจุท ููุงูุชูุงู ุฅูู ุตูุญุฉ ุงูุชุญูู

---

## ๐ฏ **ุงููุฑุญูุฉ 3: ุงุฎุชุจุงุฑ ุงูุฑุญูุฉ ุงููุงููุฉ (Dev Mode)**

### **ุงูุณููุงุฑูู 1: ุฅุฑุณุงู OTP (ูุถุน ุงูุชุทููุฑ)**
1. **ุงูุงูุชูุงู**: `/checkout` โ `/auth/verify?redirect=/checkout`
2. **ุงูุชุญูู**: ุนุฑุถ ุฑูู ุงููุงุชู ุจุดูู ุตุญูุญ
3. **ุงูุฅุฑุณุงู**: ุงููุฑ ุนูู "ุฅุฑุณุงู ุงูุฑูุฒ ุนุจุฑ ูุงุชุณุงุจ"
4. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**:
   - ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู (ูุถุน ุงูุชุทููุฑ)"
   - ูู console: ุธููุฑ ุชูุงุตูู OTP
   - ูู dev mode: ุนุฑุถ OTP ูู ุงููุฑุจุน ุงูุฃุตูุฑ
   - ุจุฏุก ุงูุนุฏ ุงูุชูุงุฒูู (60 ุซุงููุฉ)

### **ุงูุณููุงุฑูู 2: ุงูุชุญูู ูู OTP**
1. **ุฅุฏุฎุงู ุงูุฑูุฒ**: ุงุณุชุฎุฏู ุงูุฑูุฒ ุงููุนุฑูุถ ูู dev mode
2. **ุงูุชุฃููุฏ**: ุงููุฑ ุนูู "ุชุฃููุฏ ุงูุฑูุฒ"
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**:
   - ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุงูุชุญูู ุจูุฌุงุญ!"
   - ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู `/checkout`
   - ุชุญุฏูุซ ุญุงูุฉ ุงูุญุณุงุจ

### **ุงูุณููุงุฑูู 3: ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู**
1. **ุงูุชุธุงุฑ**: ุงูุชุธุฑ ุงูุชูุงุก ุงูุนุฏ ุงูุชูุงุฒูู
2. **ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู**: ุงููุฑ ุนูู "ุฅุนุงุฏุฉ ุฅุฑุณุงู ุงูุฑูุฒ"
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**:
   - ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุฅุนุงุฏุฉ ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู (ูุถุน ุงูุชุทููุฑ)"
   - OTP ุฌุฏูุฏ ูู console
   - ุจุฏุก ุนุฏ ุชูุงุฒูู ุฌุฏูุฏ

---

## ๐ง **ุงููุฑุญูุฉ 4: ูุฑุงูุจุฉ Console Logs**

### **ูู Terminal (Server Logs)**
```
๐ง Dev Mode: Simulating WhatsApp OTP send
๐ฑ Phone: +966501234567
๐ OTP Token: 1234
๐ Message: ๐ ุฑูุฒ ุงูุชุญูู ุงูุฎุงุต ุจู...
```

### **ูู Browser Console**
```
Environment Check: {
  token: "โ Set",
  phoneId: "โ Set", 
  appName: "ูุชุฌุฑูุง ุงูุฅููุชุฑููู",
  nodeEnv: "development",
  isTestMode: true
}
```

---

## ๐จ **ุงููุฑุญูุฉ 5: ุงุฎุชุจุงุฑ ุงูุฃุฎุทุงุก**

### **ุงูุณููุงุฑูู 4: ุฑูุฒ ุฎุงุทุฆ**
1. **ุฅุฏุฎุงู ุฑูุฒ ุฎุงุทุฆ**: ุฃุฏุฎู "0000"
2. **ุงูุชุฃููุฏ**: ุงููุฑ ุนูู "ุชุฃููุฏ ุงูุฑูุฒ"
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**:
   - ุฑุณุงูุฉ ุฎุทุฃ: "ุฑูุฒ ุงูุชุญูู ุบูุฑ ุตุญูุญ"
   - ุนุฏู ุฅุนุงุฏุฉ ุงูุชูุฌูู

### **ุงูุณููุงุฑูู 5: ุฑูู ูุงุชู ุบูุฑ ุตุญูุญ**
1. **ุชุนุฏูู ุงูุฑูู**: ุบูุฑ ุฑูู ุงููุงุชู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. **ุงูุฅุฑุณุงู**: ุงููุฑ ุนูู "ุฅุฑุณุงู ุงูุฑูุฒ ุนุจุฑ ูุงุชุณุงุจ"
3. **ุงููุชูุฌุฉ ุงููุชููุนุฉ**:
   - ุฑุณุงูุฉ ุฎุทุฃ: "ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ"

---

## ๐ง **ุงููุฑุญูุฉ 6: ุงุฎุชุจุงุฑ ูุงุนุฏุฉ ุงูุจูุงูุงุช**

### **ุงูุชุญูู ูู ุงูุจูุงูุงุช**
```sql
-- ูู MongoDB Compass ุฃู ุฃู ุฃุฏุงุฉ ุฃุฎุฑู
db.users.find({
  phone: "ุฑูู_ุงููุงุชู_ููุง"
}, {
  phone: 1,
  isOtp: 1,
  otpCode: 1,
  isActive: 1
})
```

### **ุงููุชุงุฆุฌ ุงููุชููุนุฉ**
- **ูุจู ุงูุฅุฑุณุงู**: `isOtp: false`, `otpCode: null`
- **ุจุนุฏ ุงูุฅุฑุณุงู**: `isOtp: false`, `otpCode: "1234"`
- **ุจุนุฏ ุงูุชุญูู**: `isOtp: true`, `isActive: true`, `otpCode: "1234"`

---

## ๐ **ุงููุฑุญูุฉ 7: ูุฑุงูุจุฉ ุงูุฃุฏุงุก**

### **Console Logs**
ุชุญูู ูู console logs ูู:
1. **Browser Console**: ุฃุฎุทุงุก JavaScript
2. **Terminal**: ุฃุฎุทุงุก ุงูุฎุงุฏู + Dev Mode logs
3. **Network Tab**: ุทูุจุงุช API

### **ุงูุฃุฏุงุก ุงููุชููุน**
- **ููุช ุงูุฅุฑุณุงู**: < 1 ุซุงููุฉ (dev mode)
- **ููุช ุงูุชุญูู**: < 1 ุซุงููุฉ
- **ููุช ุฅุนุงุฏุฉ ุงูุชูุฌูู**: < 2 ุซุงููุฉ

---

## โ **ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ**

- [ ] ููู `.env.local` ููุฌูุฏ ูุน ุงูููู ุงูููููุฉ
- [ ] ุงูุฎุงุฏู ูุนูู ุจุฏูู ุฃุฎุทุงุก
- [ ] ุตูุญุฉ `/auth/verify` ุชูุชุญ ุจุดูู ุตุญูุญ
- [ ] ุฑูู ุงููุงุชู ูุนุฑูุถ ุจุดูู ุตุญูุญ
- [ ] ุฒุฑ "ุฅุฑุณุงู ุงูุฑูุฒ ุนุจุฑ ูุงุชุณุงุจ" ูุนูู
- [ ] ุฑุณุงูุฉ "ุชู ุฅุฑุณุงู ุฑูุฒ ุงูุชุญูู (ูุถุน ุงูุชุทููุฑ)" ุชุธูุฑ
- [ ] OTP ูุนุฑูุถ ูู dev mode (ุงููุฑุจุน ุงูุฃุตูุฑ)
- [ ] Console logs ุชุธูุฑ ุชูุงุตูู OTP
- [ ] ุงูุชุญูู ูู OTP ูุนูู
- [ ] ุฅุนุงุฏุฉ ุงูุชูุฌูู ุฅูู checkout ูุนูู
- [ ] ุญุงูุฉ ุงูุญุณุงุจ ูุญุฏุซุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- [ ] ุฅุนุงุฏุฉ ุงูุฅุฑุณุงู ุชุนูู
- [ ] ุฑุณุงุฆู ุงูุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ

---

## ๐ **ุงูุจุฏุก ูู ุงูุงุฎุชุจุงุฑ**

**ุฃูุช ุฌุงูุฒ ููุงุฎุชุจุงุฑ!** ๐ฏ

1. **ุฃููุงู**: ุชุฃูุฏ ูู ูุฌูุฏ ููู `.env.local` ูุน ุงูููู ุงูููููุฉ
2. **ุซุงููุงู**: ุฃุนุฏ ุชุดุบูู ุงูุฎุงุฏู
3. **ุซุงูุซุงู**: ุงุจุฏุฃ ุงูุงุฎุชุจุงุฑ ูู `/checkout`

**ุงูุขู ููููู ุงุฎุชุจุงุฑ ุงููุธุงู ุจุงููุงูู ุจุฏูู ุงูุญุงุฌุฉ ูู WhatsApp API ุญูููู!**

---

## ๐ **ุงูุงูุชูุงู ุฅูู ุงูุฅูุชุงุฌ**

ุนูุฏูุง ุชููู ุฌุงูุฒุงู ููุงูุชูุงู ุฅูู ุงูุฅูุชุงุฌ:

1. **ุงุณุชุจุฏู ุงูููู ุงูููููุฉ** ุจู credentials ุญููููุฉ
2. **ุชุฃูุฏ ูู** `NODE_ENV=production`
3. **ุงุฎุชุจุฑ** ูุน WhatsApp API ุญูููู

**ูู ุชุฑูุฏ ุงูุจุฏุก ูู ุงูุงุฎุชุจุงุฑ ุงูุขูุ** ๐ 